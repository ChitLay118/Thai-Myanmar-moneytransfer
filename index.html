<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="title">WY MovieBox</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="module" src="./firebase-config.js"></script>
    
    <link rel="stylesheet" href="style.css?v=5.1">
</head>
<body id="body-root" class="bg-darkbg text-white min-h-screen pb-20 transition-colors duration-300">

    <!-- Login Screen -->
    <div id="login-screen" class="fixed inset-0 bg-darkbg z-[100] flex flex-col items-center justify-center p-4">
        <div class="w-full max-w-sm">
            <div class="login-card p-4 rounded-3xl">
                <div class="flex justify-center mb-4">
                    <img 
                        src="https://i.ibb.co/3mm1SwVj/photo-2025-09-26-02-06-35.jpg" 
                        alt="WY MovieBox Icon" 
                        class="w-20 h-20 rounded-xl border-2 border-cyan-400 p-1 object-cover shadow-2xl transition duration-500 hover:rotate-3"
                        onerror="this.onerror=null; this.src='https://placehold.co/80x80/0c4a6e/ffffff?text=Icon';"
                    >
                </div>

                <h1 class="text-2xl font-extrabold text-cyan-400 text-center mb-1">
                    WY MovieBox
                </h1>
                <p class="text-center text-slate-400 text-sm mb-5" id="form-title">
                    ဝင်ရောက်ကြည့်ရှုရန် အချက်အလက်များ ထည့်ပါ။
                </p>

                <form id="auth-form">
                    <div class="mb-4" id="username-field" style="display: none;">
                        <label for="username" class="block text-sm font-medium text-slate-300 mb-1">
                            အသုံးပြုသူအမည် (Name)
                        </label>
                        <input 
                            type="text" 
                            id="username" 
                            name="username" 
                            placeholder="သင်၏အမည်"
                            class="animated-input w-full px-3 py-2 rounded-lg focus:outline-none"
                        >
                    </div>
                    
                    <div class="mb-4">
                        <label for="email" class="block text-sm font-medium text-slate-300 mb-1">
                            အီးမေးလ်
                        </label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            placeholder="ဥပမာ: moviebox@gmail.com"
                            class="animated-input w-full px-3 py-2 rounded-lg focus:outline-none"
                            required
                        >
                    </div>

                    <div class="mb-6">
                        <label for="password" class="block text-sm font-medium text-slate-300 mb-1">
                            စကားဝှက်
                        </label>
                        <input 
                            type="password" 
                            id="password" 
                            name="password" 
                            placeholder="စကားဝှက်ကို ရိုက်ထည့်ပါ"
                            class="animated-input w-full px-3 py-2 rounded-lg focus:outline-none"
                            required
                        >
                    </div>

                    <button 
                        type="submit" 
                        class="login-button w-full text-white font-bold py-2.5 rounded-xl shadow-lg focus:outline-none focus:ring-4 focus:ring-cyan-500 focus:ring-opacity-50"
                        id="submit-button"
                    >
                        ဝင်ရောက်ပါ
                    </button>
                </form>

                <div class="mt-4 text-center">
                    <a href="#" class="text-sm font-medium text-cyan-400 hover:text-cyan-300 transition duration-150 ease-in-out" onclick="resetPassword()">
                        စကားဝှက်မေ့နေပါသလား?
                    </a>
                </div>
                
                <div class="mt-2 text-center text-xs text-slate-400">
                    <span id="toggle-prompt">အကောင့်မရှိသေးဘူးလား?</span>
                    <a href="#" class="font-medium text-cyan-400 hover:text-cyan-300 transition duration-150 ease-in-out" id="toggle-link">
                        အကောင့်အသစ်ဖွင့်ပါ
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Ad Modal -->
    <div id="ad-modal" class="hidden fixed inset-0 bg-black/90 z-[90] flex items-center justify-center p-4">
        <div class="bg-midbg rounded-xl max-w-2xl w-full relative overflow-hidden">
            <button onclick="closeAdModal()" class="absolute top-2 right-2 z-10 bg-black/50 text-white p-1 rounded-full">
                ✕
            </button>
            <div id="ad-content" class="p-4">
                <!-- Ad content will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Main App (Initially Hidden) -->
    <div id="main-app" class="hidden">
        <header id="header-sticky" class="sticky top-0 z-50 bg-darkbg p-4 border-b border-gray-700 shadow-xl">
            <div class="max-w-4xl mx-auto flex justify-between items-center h-8">
                <h1 class="text-3xl font-extrabold text-primary" data-i18n="title">WY MovieBox</h1>
                <button onclick="logout()" class="text-sm text-gray-400 hover:text-white">
                    ထွက်ရန်
                </button>
            </div>
            
            <div id="menu-bar" class="max-w-4xl mx-auto mt-4 flex space-x-2 overflow-x-auto whitespace-nowrap py-1 pointer-events-none opacity-50">
                <button class="menu-btn active-category active-category-blue text-white font-semibold px-4 py-2 rounded-full text-sm transition-all duration-200 hover:opacity-90" data-category="action" onclick="showCategory('action', this)">လှုပ်ရှားမှု</button>
                <button class="menu-btn bg-gray-800 text-white font-semibold px-2 py-1 rounded-full text-sm transition-all duration-200 hover:bg-gray-700" data-category="drama" onclick="showCategory('drama', this)">ဒရာမာ</button>
                <button class="menu-btn bg-gray-800 text-white font-semibold px-2 py-1 rounded-full text-sm transition-all duration-200 hover:bg-gray-700" data-category="cartoon" onclick="showCategory('cartoon', this)">ကာတွန်း</button>
                <button class="menu-btn bg-gray-800 text-white font-semibold px-2 py-1 rounded-full text-sm transition-all duration-200 hover:bg-gray-700" data-category="romance" onclick="showCategory('romance', this)">အချစ်</button>
                <button class="menu-btn bg-gray-800 text-white font-semibold px-2 py-1 rounded-full text-sm transition-all duration-200 hover:bg-gray-700" data-category="myanmar" onclick="showCategory('myanmar', this)">မြန်မာ</button>
            </div>
        </header>

        <main id="main-content" class="max-w-full mx-auto px-4 min-h-[calc(100vh-160px)] flex flex-col">
            <div id="player-container" class="w-full max-w-3xl mx-auto rounded-xl overflow-hidden relative shadow-2xl shadow-primary/30 bg-black mt-4 mb-6 aspect-video sticky top-[135px] z-40">
                <iframe id="iframePlayer" class="w-full h-full absolute top-0 left-0" 
                        src="https://www.youtube.com/embed/YE7VzlLTP-4?autoplay=0" 
                        frameborder="0" 
                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                        allowfullscreen>
                </iframe>
                <button onclick="toggleFullScreen()" class="absolute top-4 right-4 bg-black/50 hover:bg-black/70 p-2 rounded-full text-white transition duration-200 z-40">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"/></svg>
                </button>
            </div>
            
            <div class="max-w-3xl mx-auto flex justify-between items-center mt-0 mb-6 px-2 w-full z-30">
                <p id="current-movie-title" class="text-xl font-semibold text-white/90">ရုပ်ရှင်ကို ရွေးချယ်ပါ</p>
                <button id="favorite-btn" onclick="toggleFavorite()" class="p-3 rounded-full transition duration-300 shadow-lg text-gray-500 hover:text-red-500">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-7 h-7" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
                </button>
            </div>

            <section id="movies" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-2 justify-items-center flex-grow px-0 pt-4">
                <div id="loading-indicator" class="col-span-full flex flex-col items-center justify-center w-full h-20 text-gray-400">
                    <svg class="animate-spin h-8 w-8 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>
                    <p class="mt-2 text-sm">ဒေတာများ တင်နေပါသည်...</p>
                </div>
            </section>
        </main>

        <nav id="nav-bar" class="fixed bottom-0 left-0 right-0 bg-midbg border-t border-gray-700 shadow-2xl shadow-black/80 z-50 pointer-events-none opacity-50">
            <div class="max-w-xl mx-auto flex justify-around items-center h-16">
                <button class="nav-btn flex flex-col items-center justify-center space-y-1 p-2 text-primary font-bold transition-colors duration-200" data-nav="home" onclick="changeNav(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M10 17v-6l2-2 2 2v6h5V8l-7-6-7 6v9h5z"/></svg>
                    <span class="text-xs">မူလစာမျက်နှာ</span>
                </button>
                
                <button class="nav-btn flex flex-col items-center justify-center space-y-1 p-2 text-gray-400 hover:text-white transition-colors duration-200" data-nav="trending" onclick="changeNav(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17.5 1.5l-4 4-4-4M6.5 18.5l4-4 4 4M1 12h22"/></svg>
                    <span class="text-xs">ခေတ်စားနေသည်</span>
                </button>

                <button class="nav-btn flex flex-col items-center justify-center space-y-1 p-2 text-gray-400 hover:text-white transition-colors duration-200" data-nav="favorites" onclick="changeNav(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"/></svg>
                    <span class="text-xs">အနှစ်သက်ဆုံး</span>
                </button>

                <!-- ModApp Button -->
                <button class="nav-btn flex flex-col items-center justify-center space-y-1 p-2 text-gray-400 hover:text-white transition-colors duration-200" data-nav="modapp" onclick="changeNav(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2"/><path d="M12 18V6M9 15h6M9 9h6"/></svg>
                    <span class="text-xs">ModApp</span>
                </button>

                <!-- Admin Button (Only for Admin) -->
                <button id="admin-btn" class="hidden nav-btn flex flex-col items-center justify-center space-y-1 p-2 text-gray-400 hover:text-white transition-colors duration-200" data-nav="admin" onclick="changeNav(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                    <span class="text-xs">Admin</span>
                </button>

                <button class="nav-btn flex flex-col items-center justify-center space-y-1 p-2 text-gray-400 hover:text-white transition-colors duration-200" data-nav="profile" onclick="changeNav(this)">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    <span class="text-xs">အသုံးပြုသူ</span>
                </button>
            </div>
        </nav>
    </div>

    <script type="module" src="./auth.js?v=5.1"></script>
    <script src="script.js?v=5.1"></script>
    <script type="module" src="./admin.js"></script>
    <script type="module" src="./ad-manager.js"></script>
    
    <!-- Simple Alert Modal -->
    <div id="simple-alert" class="hidden fixed top-4 right-4 bg-red-600 text-white p-4 rounded-lg shadow-lg z-[110] max-w-sm">
        <div id="alert-message"></div>
    </div>
</body>
</html>
